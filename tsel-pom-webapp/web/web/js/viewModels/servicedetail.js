define(["ojs/ojcore","knockout","jquery","../appController","common/configService","common/restService","common/rendererService","common/userInfo","ojs/ojdatetimepicker","ojs/ojdialog","ojs/ojrowexpander"],function(e,r,t,s,a,i,l,c){return this.passedParam=e.Router.rootInstance.retrieve(),this.serviceDtl_dateTimeConverter2=l.dateTimeConverter2,this.serviceDtl_dateTimeRenderer2=function(e){return l.dateTimeRendererX(e)},function(){var t=this;t.passedParam=e.Router.rootInstance.retrieve(),t.connected=function(){},t.disconnected=function(){},t.transitionCompleted=function(){},t.serviceDtl_dateTimeRenderer=function(e){return l.dateTimeRenderer(e)},t.serviceDtl_columns=[{headerText:"Order ID",field:"orderId"},{headerText:"MSISDN",field:"msisdn"},{headerText:"Order Type",field:"orderType"},{headerText:"Sales Channel",field:"salesChannel"},{headerText:"Aging",field:"aging"},{headerText:"Error Details",field:"foMsg",style:"white-space:normal;word-wrap:break-word; text-align: left;"},{headerText:"Audit",template:"servicedetail-audit-template"}],t.serviceDtl_dateTimeConverter=l.dateTimeConverter2,t.serviceDtl_startDate=r.observable(),t.serviceDtl_endDate=r.observable(),t.serviceDtl_searchSystem=r.observable(t.passedParam?t.passedParam.system:""),t.serviceDtl_searchOperation=r.observable(t.passedParam?t.passedParam.operation:""),t.serviceDtl_searchOrderID=r.observable(),t.serviceDtl_searchMsisdn=r.observable(),t.serviceDtl_searchWorkOrderId=r.observable(),t.serviceDtl_dateConverter=l.dateConverter,t.serviceDtl_fetchSize=r.observable("-1"),t.serviceDtl_allData=r.observableArray(),t.serviceDtl_tableWidth=r.observable("100%"),t.serviceDtl_display="grid",t.serviceDtl_columnsDefault={sortable:"disable"},t.serviceDtl_scrollPolicy="loadMoreOnScroll",t.serviceDtl_scrollPolicyOptions={fetchSize:10},t.serviceDtl_rootAttributes={style:"width:100%;overflow-x: auto; overflow-y: hidden;"},t.serviceDtl_selectionMode={row:"single"},t.serviceDtl_datasource=new e.PagingTableDataSource(new e.ArrayTableDataSource(t.serviceDtl_allData,{idAttribute:"seq"})),t.serviceDtl_selectedRow=r.observable(),t.serviceDtl_searchOrderType=r.observable(),t.service_orderType=r.observableArray(),t.serviceDtl_orderType=function(){getRestData(i.getLOV,["lovName"],["LOV_ORDER_TYPE"],function(e){if(e){let r=e.filter(e=>e.enable).map(e=>({label:e.lookupValue2,value:e.lookupValue2}));t.service_orderType(r)}})},t.serviceDtl_orderType(),t.serviceDtl_refreshData=function(){var e=[],r=[];t.serviceDtl_searchSystem&&t.serviceDtl_searchSystem()&&t.passedParam.system&&(e.push("system"),r.push(t.serviceDtl_searchSystem()||t.passedParam.system)),t.serviceDtl_searchOperation&&t.serviceDtl_searchOperation()&&t.passedParam.operation&&(e.push("operation"),r.push(t.serviceDtl_searchOperation()||t.passedParam.operation)),t.serviceDtl_searchOrderID&&t.serviceDtl_searchOrderID()&&(e.push("orderId"),r.push(t.serviceDtl_searchOrderID())),t.serviceDtl_searchMsisdn&&t.serviceDtl_searchMsisdn()&&(e.push("msisdn"),r.push(t.serviceDtl_searchMsisdn())),t.serviceDtl_searchOrderType&&t.serviceDtl_searchOrderType()&&(e.push("orderType"),r.push(t.serviceDtl_searchOrderType())),t.serviceDtl_startDate&&t.serviceDtl_startDate()&&(e.push("startCreDate"),r.push(t.serviceDtl_startDate())),t.serviceDtl_endDate&&t.serviceDtl_endDate()&&(e.push("endCreDate"),r.push(t.serviceDtl_endDate())),getRestData(i.getServiceDetail,e,r,function(e,r){"ERROR"!==e&&t.serviceDtl_allData(e.content)})},t.exportToCSV=function(){let e=t.serviceDtl_allData().map(e=>e.orderId);var r=0;for(result=[];r<e.length;)r%1==0&&result.push([]),result[result.length-1].push(e[r++]);result.splice(0,0,["orderId"]);let s="data:text/csv;charset=utf-8,";result.forEach(function(e){let r=e.join(",");s+=r+"\r\n"});var a=encodeURI(s),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download","massorder_data.csv"),document.body.appendChild(i),i.click()},t.serviceDtl_onSearch=function(){t.serviceDtl_refreshData()},t.serviceDtl_onReset=function(){t.serviceDtl_searchOrderID(void 0),t.serviceDtl_searchMsisdn(void 0),t.serviceDtl_searchOrderType(""),t.serviceDtl_startDate(void 0),t.serviceDtl_endDate(void 0),t.serviceDtl_refreshData()},t.serviceDtl_refreshData()}});