define(["ojs/ojcore","knockout","jquery","../appController","common/constants","common/rendererService","common/restService",,"serviceUtils","ojs/ojdatetimepicker","ojs/ojvalidation-datetime"],function(e,a,t,o,r,d,s){this.dashboard_onClickCollectionCR=function(e,a){const t={orderType:"CR",filterDate:e.ctdbDate,requestStatus:e.requestStatus};o.redirect("collectiondetail",t)},this.dashboard_onClickCollectionSC=function(e,a){const t={orderType:"SC",filterDate:e.ctdbDate,requestStatus:e.requestStatus};o.redirect("collectiondetail",t)};var l=this;return function(){l.handleActivated=function(e){},l.activated=function(e){},l.initialize=function(e){},l.connected=function(){},l.disconnected=function(){},l.transitionCompleted=function(){};var t=e.IntlConverterUtils.dateToLocalIso(new Date);l.dashboard_searchDate=a.observable(t.split("T")[0]),l.dashboard_dateConverter=d.dateConverter,l.dashboard_operationCodeLOV=a.observableArray(),l.dashboard_searchOperationCode=a.observable(),l.dashboard_onClickServiceDetail=function(e,a){const t={system:a.destinationLogical,operation:a.operation,filterDate:l.dashboard_searchDate()};o.redirect("servicedetail",t)},l.dashboard_opCodeStatus=function(){getRestData(s.getLOV,["lovName"],["LOV_OPERATION_CODE"],function(e){if(e){let a=e.filter(e=>e.enable).map(e=>({label:e.lookupValue4,value:e.lookupValue4}));l.dashboard_operationCodeLOV(a)}})},l.dashboard_opCodeStatus(),l.dashboard_columnsCR=[{headerText:"Request Status",field:"requestStatus"},{headerText:"Retry Attempts Left",headerTemplate:"ral-template",field:"retryAttemptsLeft"},{headerText:"Request",field:"totalRequest",template:"cr-request-template"}],l.dashboard_columnsSC=[{headerText:"Request Status",field:"requestStatus"},{headerText:"Retry Attempts Left",headerTemplate:"ral-template",field:"retryAttemptsLeft"},{headerText:"Request",field:"totalRequest",template:"sc-request-template"}],l.dashboard_columnsSM=[{headerText:"Operation Code",field:"operationCode"},{headerText:"Request Status",field:"requestStatus"},{headerText:"Count(*)",field:"totalCount"}],l.dashboard_columnsSOC=[{headerText:"System",field:"destinationLogical"},{headerText:"Operation",field:"operation"},{headerText:"Total Count",field:"request"},{headerText:"Count(<=1/>1)",headerTemplate:"tc-template",field:"count"},{headerText:"Avg Aging",field:"avgAging"},{headerText:"Min - Max Aging",headerTemplate:"mma-template",field:"minMaxAging"},{headerText:"Status",field:"status",template:"soc-status-template"},{headerText:"Action",template:"detail-template"}],l.dashboard_columnsHOC=[{headerText:"Hour",field:"ctdbTimeDesc"},{headerText:"Total",field:"totalCollection"}],l.dashboard_allDataCR=a.observableArray(),l.dashboard_tableWidthCR=a.observable("100%"),l.dashboard_displayCR="grid",l.dashboard_columnsDefaultCR={sortable:"auto"},l.dashboard_scrollPolicyCR="loadMoreOnScroll",l.dashboard_scrollPolicyOptionsCR={fetchSize:10},l.dashboard_rootAttributesCR={style:"width:100%; height:280px;"},l.dashboard_selectionModeCR={row:"single"},l.dashboard_datasourceCR=new e.PagingTableDataSource(new e.ArrayTableDataSource(l.dashboard_allDataCR,{idAttribute:"seq"})),l.dashboard_fetchSizeCR=a.observable(),l.dashboard_selectedRowCR=a.observable(),l.dashboard_allDataSC=a.observableArray(),l.dashboard_tableWidthSC=a.observable("100%"),l.dashboard_displaySC="grid",l.dashboard_columnsDefaultSC={sortable:"auto"},l.dashboard_scrollPolicySC="loadMoreOnScroll",l.dashboard_scrollPolicyOptionsSC={fetchSize:10},l.dashboard_rootAttributesSC={style:"width:100%; height:280px;"},l.dashboard_selectionModeSC={row:"single"},l.dashboard_datasourceSC=new e.PagingTableDataSource(new e.ArrayTableDataSource(l.dashboard_allDataSC,{idAttribute:"seq"})),l.dashboard_fetchSizeSC=a.observable(),l.dashboard_selectedRowSC=a.observable(),l.dashboard_allDataSM=a.observableArray(),l.dashboard_tableWidthSM=a.observable("100%"),l.dashboard_displaySM="grid",l.dashboard_columnsDefaultSM={sortable:"auto"},l.dashboard_scrollPolicySM="loadMoreOnScroll",l.dashboard_scrollPolicyOptionsSM={fetchSize:10},l.dashboard_rootAttributesSM={style:"width:100%; height:280px;"},l.dashboard_selectionModeSM={row:"single"},l.dashboard_datasourceSM=new e.PagingTableDataSource(new e.ArrayTableDataSource(l.dashboard_allDataSM,{idAttribute:"seq"})),l.dashboard_fetchSizeSM=a.observable(),l.dashboard_selectedRowSM=a.observable(),l.dashboard_allDataSOC=a.observableArray(),l.dashboard_tableWidthSOC=a.observable("100%"),l.dashboard_displaySOC="grid",l.dashboard_columnsDefaultSOC={sortable:"auto"},l.dashboard_scrollPolicySOC="loadMoreOnScroll",l.dashboard_scrollPolicyOptionsSOC={fetchSize:10},l.dashboard_rootAttributesSOC={style:"width:100%; height:280px; white-space:normal; overflow: hidden;"},l.dashboard_selectionModeSOC={row:"single"},l.dashboard_datasourceSOC=new e.PagingTableDataSource(new e.ArrayTableDataSource(l.dashboard_allDataSOC,{idAttribute:"seq"})),l.dashboard_fetchSizeSOC=a.observable(),l.dashboard_selectedRowSOC=a.observable(),l.dashboard_allDataHOC=a.observableArray(),l.dashboard_tableWidthHOC=a.observable("100%"),l.dashboard_displayHOC="grid",l.dashboard_columnsDefaultHOC={sortable:"auto"},l.dashboard_scrollPolicyHOC="loadMoreOnScroll",l.dashboard_scrollPolicyOptionsHOC={fetchSize:10},l.dashboard_rootAttributesHOC={style:"width:100%; height:280px;"},l.dashboard_selectionModeHOC={row:"single"},l.dashboard_datasourceHOC=new e.PagingTableDataSource(new e.ArrayTableDataSource(l.dashboard_allDataHOC,{idAttribute:"ctdbTime"})),l.dashboard_fetchSizeHOC=a.observable(),l.dashboard_selectedRowHOC=a.observable(),l.dashboard_totalScheduler=a.observable(0),l.dashboard_refreshData=function(){var e=[],a=[],t=[],o=[],r=[],d=[];l.dashboard_operationCodeOnChange(),l.dashboard_searchDate&&l.dashboard_searchDate().length>0&&(e.push("cbtDate"),a.push(l.dashboard_searchDate()),t.push("cbtDate"),o.push(l.dashboard_searchDate()),r.push("cbtDate"),d.push(l.dashboard_searchDate())),getRestData(s.getTotalSchedulerService,e,a,function(e,a){if("ERROR"!==e){var t=e.content;t[0]&&l.dashboard_totalScheduler(t[0].total)}}),getRestData(s.getSchedulerMidnightService,e,a,function(e,a){"ERROR"!==e&&l.dashboard_allDataSM(e.content)}),getRestData(s.getStuckOrderCountService,e,a,function(e,a){"ERROR"!==e&&l.dashboard_allDataSOC(e.content)}),t.push("collectionType"),o.push("SC"),getRestData(s.getCollectionService,t,o,function(e,a){"ERROR"!==e&&l.dashboard_allDataSC(e.content)}),r.push("collectionType"),d.push("CR"),getRestData(s.getCollectionService,r,d,function(e,a){"ERROR"!==e&&l.dashboard_allDataCR(e.content)})},l.dashboard_operationCodeOnChange=function(){var e=[],a=[];l.dashboard_searchDate&&l.dashboard_searchDate().length>0&&(e.push("ctdbDate"),a.push(l.dashboard_searchDate())),l.dashboard_searchOperationCode&&l.dashboard_searchOperationCode()?(e.push("operationCode"),a.push(l.dashboard_searchOperationCode())):(e.push("operationCode"),a.push("null")),l.dashboard_allDataHOC([])},l.dashboard_onSearch=function(){l.dashboard_refreshData()},l.dashboard_refreshData()}});