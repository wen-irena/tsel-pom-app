import adjust_lon from"../common/adjust_lon";import{HALF_PI,EPSLN}from"../constants/values";import asinz from"../common/asinz";export function init(){this.R=this.a};export function forward(t){var a,s,h=t.x,i=t.y,n=adjust_lon(h-this.long0);Math.abs(i)<=EPSLN&&(a=this.x0+this.R*n,s=this.y0);var r=asinz(2*Math.abs(i/Math.PI));(Math.abs(n)<=EPSLN||Math.abs(Math.abs(i)-HALF_PI)<=EPSLN)&&(a=this.x0,s=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/n-n/Math.PI),M=o*o,e=Math.sin(r),P=Math.cos(r),I=P/(e+P-1),x=I*I,m=I*(2/e-1),y=m*m,u=Math.PI*this.R*(o*(I-y)+Math.sqrt(M*(I-y)*(I-y)-(y+M)*(x-y)))/(y+M);n<0&&(u=-u),a=this.x0+u;var v=M+I;return u=Math.PI*this.R*(m*v-o*Math.sqrt((y+M)*(M+1)-v*v))/(y+M),s=i>=0?this.y0+u:this.y0-u,t.x=a,t.y=s,t};export function inverse(t){var a,s,h,i,n,r,o,M,e,P,I,x;return t.x-=this.x0,t.y-=this.y0,I=Math.PI*this.R,n=(h=t.x/I)*h+(i=t.y/I)*i,I=3*(i*i/(M=-2*(r=-Math.abs(i)*(1+n))+1+2*i*i+n*n)+(2*(o=r-2*i*i+h*h)*o*o/M/M/M-9*r*o/M/M)/27)/(e=(r-o*o/3/M)/M)/(P=2*Math.sqrt(-e/3)),Math.abs(I)>1&&(I=I>=0?1:-1),x=Math.acos(I)/3,s=t.y>=0?(-P*Math.cos(x+Math.PI/3)-o/3/M)*Math.PI:-(-P*Math.cos(x+Math.PI/3)-o/3/M)*Math.PI,a=Math.abs(h)<EPSLN?this.long0:adjust_lon(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(h*h-i*i)+n*n))/2/h),t.x=a,t.y=s,t};export var names=["Van_der_Grinten_I","VanDerGrinten","vandg"];export default{init:init,forward:forward,inverse:inverse,names:names};