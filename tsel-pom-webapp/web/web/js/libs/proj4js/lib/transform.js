import{D2R,R2D,PJD_3PARAM,PJD_7PARAM}from"./constants/values";import datum_transform from"./datum_transform";import adjust_axis from"./adjust_axis";import proj from"./Proj";import toPoint from"./common/toPoint";function checkNotWGS(t,r){return(t.datum.datum_type===PJD_3PARAM||t.datum.datum_type===PJD_7PARAM)&&"WGS84"!==r.datumCode||(r.datum.datum_type===PJD_3PARAM||r.datum.datum_type===PJD_7PARAM)&&"WGS84"!==t.datumCode}export default function transform(t,r,o){var m;return Array.isArray(o)&&(o=toPoint(o)),t.datum&&r.datum&&checkNotWGS(t,r)&&(o=transform(t,m=new proj("WGS84"),o),t=m),"enu"!==t.axis&&(o=adjust_axis(t,!1,o)),"longlat"===t.projName?o={x:o.x*D2R,y:o.y*D2R}:(t.to_meter&&(o={x:o.x*t.to_meter,y:o.y*t.to_meter}),o=t.inverse(o)),t.from_greenwich&&(o.x+=t.from_greenwich),o=datum_transform(t.datum,r.datum,o),r.from_greenwich&&(o={x:o.x-r.from_greenwich,y:o.y}),"longlat"===r.projName?o={x:o.x*R2D,y:o.y*R2D}:(o=r.forward(o),r.to_meter&&(o={x:o.x/r.to_meter,y:o.y/r.to_meter})),"enu"!==r.axis?adjust_axis(r,!0,o):o};