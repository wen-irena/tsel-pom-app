import{SEC_TO_RAD}from"../constants/values";export var iterations=1;export function init(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013};export function forward(i){var t,s=i.x,h=i.y-this.lat0,r=s-this.long0,_=h/SEC_TO_RAD*1e-5,e=r,a=1,m=0;for(t=1;t<=10;t++)a*=_,m+=this.A[t]*a;var B,o=m,n=e,C=1,f=0,v=0,A=0;for(t=1;t<=6;t++)B=f*o+C*n,C=C*o-f*n,f=B,v=v+this.B_re[t]*C-this.B_im[t]*f,A=A+this.B_im[t]*C+this.B_re[t]*f;return i.x=A*this.a+this.x0,i.y=v*this.a+this.y0,i};export function inverse(i){var t,s,h=i.x,r=i.y,_=h-this.x0,e=(r-this.y0)/this.a,a=_/this.a,m=1,B=0,o=0,n=0;for(t=1;t<=6;t++)s=B*e+m*a,m=m*e-B*a,B=s,o=o+this.C_re[t]*m-this.C_im[t]*B,n=n+this.C_im[t]*m+this.C_re[t]*B;for(var C=0;C<this.iterations;C++){var f,v=o,A=n,D=e,x=a;for(t=2;t<=6;t++)f=A*o+v*n,v=v*o-A*n,A=f,D+=(t-1)*(this.B_re[t]*v-this.B_im[t]*A),x+=(t-1)*(this.B_im[t]*v+this.B_re[t]*A);v=1,A=0;var p=this.B_re[1],l=this.B_im[1];for(t=2;t<=6;t++)f=A*o+v*n,v=v*o-A*n,A=f,p+=t*(this.B_re[t]*v-this.B_im[t]*A),l+=t*(this.B_im[t]*v+this.B_re[t]*A);var u=p*p+l*l;o=(D*p+x*l)/u,n=(x*p-D*l)/u}var d=o,y=n,c=1,w=0;for(t=1;t<=9;t++)c*=d,w+=this.D[t]*c;var g=this.lat0+w*SEC_TO_RAD*1e5,E=this.long0+y;return i.x=E,i.y=g,i};export var names=["New_Zealand_Map_Grid","nzmg"];export default{init:init,forward:forward,inverse:inverse,names:names};