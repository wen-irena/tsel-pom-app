import CustomElementInternals from"./CustomElementInternals.js";export default class DocumentConstructionObserver{constructor(t,e){this._internals=t,this._document=e,this._observer=void 0,this._internals.patchAndUpgradeTree(this._document),"loading"===this._document.readyState&&(this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this._document,{childList:!0,subtree:!0}))}disconnect(){this._observer&&this._observer.disconnect()}_handleMutations(t){const e=this._document.readyState;"interactive"!==e&&"complete"!==e||this.disconnect();for(let e=0;e<t.length;e++){const s=t[e].addedNodes;for(let t=0;t<s.length;t++){const e=s[t];this._internals.patchAndUpgradeTree(e)}}}};