import{onBlur}from"../display/focus.js";import{on}from"../util/event.js";function forEachCodeMirror(e){if(!document.getElementsByClassName)return;let r=document.getElementsByClassName("CodeMirror");for(let o=0;o<r.length;o++){let l=r[o].CodeMirror;l&&e(l)}}let globalsRegistered=!1;export function ensureGlobalHandlers(){globalsRegistered||(registerGlobalHandlers(),globalsRegistered=!0)};function registerGlobalHandlers(){let e;on(window,"resize",()=>{null==e&&(e=setTimeout(()=>{e=null,forEachCodeMirror(onResize)},100))}),on(window,"blur",()=>forEachCodeMirror(onBlur))}function onResize(e){let r=e.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,e.setSize()}